<html>


<!-- Mirrored from www.tutorialesprogramacionya.com/javascriptya/temarios/descripcion.php?inicio=100&cod=108 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Mar 2024 10:33:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QWKWPBDEFK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QWKWPBDEFK');
</script>

<script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-4669394804436935",
    enable_page_level_ads: true
  });
</script>
<title>Tutorial de JavaScript : Conceptos</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../css/estilos.css" rel="stylesheet" type="text/css">
  <meta charset="UTF-8">

<style>
html,body {
	background-color: #D3E9D0;
	font-family: Trebuchet MS, Verdana, Arial, sans-serif;
	font-size: 10pt;
	text-align:center;
}

h1 {
	font-size: 14pt;
	margin: 0%;
}

div#contentdetalle{clear:left;
                   max-width:900px;
				   border-top:0px solid #999;
				   padding-top:15px;
				   background-color: #aed7a8;
				   text-align:left;
				   font-size:1.3em;
				   font-weight:normal;
				   font-family:arial;
				   padding:20px}
				   
.recuadro {
  background-color:#ffffcc;
  text-align:left;
  font-family:courier;
  font-size:1em;
  border-width:0;
  padding:5px;

  border: 1px dotted #ffaa00;
  margin-left:5px;  
}		

.tablajs {
    border-collapse: collapse;
    background-color: #fff;
    border: 1px solid #dee2e6;    
    padding: 0.3rem;    
}

.tablajs th,
.tablajs td {
  padding: 0.75rem;
  vertical-align: top;
  border-top: 1px solid #dee2e6;
}

		   
</style>

<style>
.uno { width: 320px; height: 100px; }
@media(min-width: 500px) { .uno { width: 320px; height: 100px; } }
@media(min-width: 800px) { .uno { width: 336px; height: 280px; } }

.dos { width: 320px; height: 100px; }
@media(min-width: 500px) { .dos { width: 320px; height: 100px; } }
@media(min-width: 800px) { .dos { width: 336px; height: 280px; } }
</style>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80268657-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>

<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">
<table width="98%">
<tr>
<td>
<span style="float:right"><a target="_blank" style="margin-right:0.1em;" href="https://www.tutorialesprogramacionya.com/">Listado completo de tutoriales</a></span>
<h1>ES6 - API fetch (recuperar archivo de texto)</h1></td>
<td align="right">


</td>
</tr>
</table>

      </div>
    </div>
  </div>
</div>
<br>


<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">

<div id="contentdetalle">

<div style="display:block;float:left;margin: 5px;"> 
 <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- adaptable1 -->
<ins class="adsbygoogle uno"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="4716538363"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> 
</div> 

<p>En el concepto anterior presentamos el API fetch para recuperar datos de un servidor web. Vimos que en la primer promesa cuando se cumple procedemos a convertir los datos enviados a formato JSON:</p>
<pre>
  fetch("datos.php")
      .then(response=><strong>response.json()</strong>)
      .then(datos=>console.log(datos));
</pre>

<p>Veremos otro método que nos permite convertir los datos devueltos a formato de texto, para ello utilizamos el método 'text()' en lugar de 'json()'.</p>

<p>Veremos una pequeña aplicación que muestre 3 botones con diferentes signos del zodiaco, cuando se presiona el botón procedemos a requerir al servidor un archivo de texto.</p>
<h3>pagina1.html</h3>
<pre class="recuadro">
&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;Ejemplo de JavaScript&lt;/title&gt;
    &lt;meta charset="UTF-8"&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div&gt;
        &lt;button id="boton1"&gt;Aries&lt;/button&gt;
        &lt;button id="boton2"&gt;Tauro&lt;/button&gt;
        &lt;button id="boton3"&gt;Geminis&lt;/button&gt;
    &lt;/div&gt;
    &lt;div id="contenido"&gt;&lt;/div&gt;

    &lt;/div&gt;
    &lt;script&gt;
        document.getElementById("boton1").addEventListener("click", () =&gt; mostrar('aries.txt'));
        document.getElementById("boton2").addEventListener("click", () =&gt; mostrar('tauro.txt'));
        document.getElementById("boton3").addEventListener("click", () =&gt; mostrar('geminis.txt'));


        function mostrar(signo) {
            fetch(signo)
                .then(response =&gt; response.text())
                .then(datos =&gt; document.getElementById("contenido").innerText = datos);
        }

    &lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;
</pre>
<p>Recordar que para probar estos ejercicios debemos tener instalado un servidor web en nuestro equipo y hacer las peticiones via localhost.</p>
<p>En la carpeta del servidor se debe tener almacenadas los 4 archivos, el html y los 3 archivos txt:</p>
<pre>
pagina1.html
aries.txt
tauro.txt
geminis.txt
</pre>
<p>Inmediatamente la página se encuentra cargada en el navegador enlazamos el evento click para cada uno de los botones indicando que se debe llamar la función 'mostrar' con el nombre del archivo de cuenta a recuperar:</p>
<pre>
        document.getElementById("boton1").addEventListener("click", () =&gt; mostrar('aries.txt'));
        document.getElementById("boton2").addEventListener("click", () =&gt; mostrar('tauro.txt'));
        document.getElementById("boton3").addEventListener("click", () =&gt; mostrar('geminis.txt'));
</pre>
<p>La función 'mostrar' hace la petición al servidor y cuando recibe la respuesta convierte los datos recibidos a formato texto. Finalmente luego de la transformación a formato texto pasamos a mostrarlo dentro de una marca 'div':</p>
<pre>
        function mostrar(signo) {
            fetch(signo)
                .then(response =&gt; response.text())
                .then(datos =&gt; document.getElementById("contenido").innerText = datos);
        }
</pre>

<p>Nuevamente podemos comprobar la sencillez que es recuperar un recurso de nuestro servidor, convertirlo a formato texto y proceder a actualizar la página en forma dinámica.</p>

</p>
</div>

<div>
<!--publi-->
<script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- adaptable2 -->
<ins class="adsbygoogle dos"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="5774469161"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--publi-->
<script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- adaptable2 -->
<ins class="adsbygoogle dos"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="5774469161"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div>


   <h2><a href="../indexf6ce.html?inicio=100">Retornar</a></h2>   

      </div>
    </div>
  </div>
</div>


</body>


<!-- Mirrored from www.tutorialesprogramacionya.com/javascriptya/temarios/descripcion.php?inicio=100&cod=108 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Mar 2024 10:33:28 GMT -->
</html>
