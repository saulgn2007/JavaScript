<html>


<!-- Mirrored from www.tutorialesprogramacionya.com/javascriptya/temarios/descripcion.php?inicio=100&cod=110 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Mar 2024 10:33:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QWKWPBDEFK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QWKWPBDEFK');
</script>

<script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-4669394804436935",
    enable_page_level_ads: true
  });
</script>
<title>Tutorial de JavaScript : Conceptos</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../css/estilos.css" rel="stylesheet" type="text/css">
  <meta charset="UTF-8">

<style>
html,body {
	background-color: #D3E9D0;
	font-family: Trebuchet MS, Verdana, Arial, sans-serif;
	font-size: 10pt;
	text-align:center;
}

h1 {
	font-size: 14pt;
	margin: 0%;
}

div#contentdetalle{clear:left;
                   max-width:900px;
				   border-top:0px solid #999;
				   padding-top:15px;
				   background-color: #aed7a8;
				   text-align:left;
				   font-size:1.3em;
				   font-weight:normal;
				   font-family:arial;
				   padding:20px}
				   
.recuadro {
  background-color:#ffffcc;
  text-align:left;
  font-family:courier;
  font-size:1em;
  border-width:0;
  padding:5px;

  border: 1px dotted #ffaa00;
  margin-left:5px;  
}		

.tablajs {
    border-collapse: collapse;
    background-color: #fff;
    border: 1px solid #dee2e6;    
    padding: 0.3rem;    
}

.tablajs th,
.tablajs td {
  padding: 0.75rem;
  vertical-align: top;
  border-top: 1px solid #dee2e6;
}

		   
</style>

<style>
.uno { width: 320px; height: 100px; }
@media(min-width: 500px) { .uno { width: 320px; height: 100px; } }
@media(min-width: 800px) { .uno { width: 336px; height: 280px; } }

.dos { width: 320px; height: 100px; }
@media(min-width: 500px) { .dos { width: 320px; height: 100px; } }
@media(min-width: 800px) { .dos { width: 336px; height: 280px; } }
</style>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80268657-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>

<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">
<table width="98%">
<tr>
<td>
<span style="float:right"><a target="_blank" style="margin-right:0.1em;" href="https://www.tutorialesprogramacionya.com/">Listado completo de tutoriales</a></span>
<h1>ES6 - API fetch (recuperar archivo de imágen)</h1></td>
<td align="right">


</td>
</tr>
</table>

      </div>
    </div>
  </div>
</div>
<br>


<div class="upperleft">
  <div class="upperright">
    <div class="lowerleft">
      <div class="lowerright">

<div id="contentdetalle">

<div style="display:block;float:left;margin: 5px;"> 
 <script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- adaptable1 -->
<ins class="adsbygoogle uno"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="4716538363"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> 
</div> 

<p>Vimos en conceptos anteriores que la respuesta del API fetch podemos utilizar los métodos:</p>
<ul>
<li>
<p>text() - Convertimos el dato devuelto a formato texto.</p>
</li>

<li>
<p>json() - Convertimos el dato devuelto a formato json.</p>
</li>

<li>
<p>blob() - Este nuevo método es utilizado entre otros propósitos para recuperar en forma asíncrona imágenes. blob significa <strong>B</strong>inary <strong>Large</strong> <strong>Ob</strong>jects, objetos binarios grandes.</p>
</li>

</ul>

<h3>Problema</h3>>
<p>Disponer 3 botones con diferentes signos del zodiaco, cuando se presiona el botón procedemos a requerir al servidor un archivo de imagen y proceder a mostrarlo en una etiqueta HTML 'img'.</p>

<pre class="recuadro">
&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;Ejemplo de JavaScript&lt;/title&gt;
    &lt;meta charset="UTF-8"&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div&gt;
        &lt;button id="boton1"&gt;Aries&lt;/button&gt;
        &lt;button id="boton2"&gt;Tauro&lt;/button&gt;
        &lt;button id="boton3"&gt;Geminis&lt;/button&gt;
    &lt;/div&gt;
    &lt;img id="foto"&gt;

    &lt;/div&gt;
    &lt;script&gt;
        document.getElementById("boton1").addEventListener("click", () =&gt; mostrar('aries.png'));
        document.getElementById("boton2").addEventListener("click", () =&gt; mostrar('tauro.png'));
        document.getElementById("boton3").addEventListener("click", () =&gt; mostrar('geminis.png'));


        function mostrar(signo) {
            fetch(signo)
                .then(response =&gt; response.blob())
                .then(datos =&gt; document.getElementById("foto").setAttribute('src', URL.createObjectURL(datos)));
        }

    &lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;
</pre>
<p>Disponemos los tres botones en el bloque HTML con una etiqueta 'img' sin definir la propiedad 'scr' (lo cual hace que en principio no aparezca una imagen):</p>
<pre>
  &lt;div&gt;
    &lt;button id="boton1"&gt;Aries&lt;/button&gt;
    &lt;button id="boton2"&gt;Tauro&lt;/button&gt;
    &lt;button id="boton3"&gt;Geminis&lt;/button&gt;
  &lt;/div&gt;
  &lt;img id="foto"&gt;
</pre>

<p>Cuando se presiona alguno de los botones llamamos a la función mostrar pasando como parámetro el nombre del archivo de imagen que se debe recuperar del servidor:</p>
<pre>
        document.getElementById("boton1").addEventListener("click", () =&gt; mostrar('aries.png'));
        document.getElementById("boton2").addEventListener("click", () =&gt; mostrar('tauro.png'));
        document.getElementById("boton3").addEventListener("click", () =&gt; mostrar('geminis.png'));
</pre>

<p>Mediante la API fetch procedemos a solicitar en forma asíncrona que recupere el recurso (en nuestro caso solo indicamos el nombre del archivo ya que se encuentra en la misma carpeta que el archivo HTML que hace la solicitud):</p>
<pre>
        function mostrar(signo) {
            fetch(signo)
</pre>
<p>Cuando llega la respuesta del servidor procedemos a retornar a la segunda promesa los datos convertidos a formato binario mediante el método 'blob':</p>>
<pre>
                .then(response =&gt; response.blob())
</pre>
<p>Con los datos convertidos a formato binario mediante el método createObjectURL del objeto URL procedemos a actualizar la propiedad 'src' de la etiqueta HTML 'img':</p>
<pre>
                .then(datos =&gt; document.getElementById("foto").setAttribute('src', URL.createObjectURL(datos)));
</pre>

<p>Como vemos el algoritmo es muy conciso para recuperar imágenes del servidor mediante la API fetch:</p>

<img src="imagentema/foto018.jpg" border="0" alt="API fetch recuperar imagen javascript"><br>
</p>
</div>

<div>
<!--publi-->
<script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- adaptable2 -->
<ins class="adsbygoogle dos"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="5774469161"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--publi-->
<script async src="../../../pagead2.googlesyndication.com/pagead/js/f.txt"></script>
<!-- adaptable2 -->
<ins class="adsbygoogle dos"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="5774469161"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div>


   <h2><a href="../indexf6ce.html?inicio=100">Retornar</a></h2>   

      </div>
    </div>
  </div>
</div>


</body>


<!-- Mirrored from www.tutorialesprogramacionya.com/javascriptya/temarios/descripcion.php?inicio=100&cod=110 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 18 Mar 2024 10:33:29 GMT -->
</html>
